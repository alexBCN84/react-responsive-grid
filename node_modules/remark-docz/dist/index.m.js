import visit from"unist-util-visit";import remove from"unist-util-remove";const componentName=e=>{const t=e.match(/^\<\\?(\w+)/);return t&&t[1]},valuesFromNodes=e=>(t,o)=>{const n=[];if(t!==o)for(let r=o;r>=t;r--){const o=e.children[r];o.children&&o.children.length>0&&n.push(...o.children.map(e=>e.value)),o.value&&o.value.length>0&&n.push(o.value),r!==t&&remove(e,o)}return n},mergeNodeWithoutCloseTag=(e,t,o)=>{if(!t.value||"string"!=typeof t.value)return;const n=componentName(t.value),r=RegExp(`^\\<${n}`),i=RegExp(`\\<\\/${n}\\>$`),l=e=>r.test(e),u=e=>i.test(e),s=e=>e&&!l(e)&&u(e);if(!n||l(t.value)&&u(t.value))return;const a=e.children.findIndex(({value:e,children:t})=>t?t.some(e=>s(e.value)):s(e));if(a>-1&&a!==o){const n=valuesFromNodes(e)(o,a);t.value=n.reverse().join("\n")}};var index=()=>e=>visit(e,"html",(t,o)=>{mergeNodeWithoutCloseTag(e,t,o)});export default index;
