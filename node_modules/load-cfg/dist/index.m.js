import{readJsonSync}from"fs-extra";import{resolve,extname}from"path";import findup from"find-up";import merge from"deepmerge";import esm from"esm";const loadFile=(e,o)=>{let n;const r=esm(module,{mode:"auto",cache:!o,cjs:{cache:!o,namedExports:!0,vars:!0}});o&&e&&delete r.cache[resolve(e)];try{if(".js"===extname(e)){const o=r(e);n=o.default||o}else n=readJsonSync(e,{encoding:"utf-8"})}catch(e){console.warn("There was an error loading your config:\n"),console.warn(e)}return n},finds=e=>[`${e}.json`,`.${e}rc`,`${e}rc.js`,`${e}rc.json`,`${e}.config.js`,`${e}.config.json`];function load(e,o,n,r){const s=findup.sync(finds(e)),c=s?loadFile(s,n):{};return o?r?merge(o,c):Object.assign({},o,c):c}function loadFrom(e,o,n,r){const s=loadFile(e,n);return o?r?merge(o,s):Object.assign({},o,s):s}export{loadFile,finds,load,loadFrom};
