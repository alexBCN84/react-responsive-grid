import{extname}from"path";function namedAssetImport({types:e}){const t=new WeakSet;return{visitor:{ImportDeclaration(i,{opts:{loaderMap:r}}){const a=i.node.source.value,n=extname(a).substr(1);t.has(i.node)||-1!==a.indexOf("!")||r[n]&&i.replaceWithMultiple(i.node.specifiers.map(i=>{if(e.isImportDefaultSpecifier(i)){const r=e.importDeclaration([e.importDefaultSpecifier(e.identifier(i.local.name))],e.stringLiteral(a));return t.add(r),r}const o=e.importDeclaration([e.importSpecifier(e.identifier(i.local.name),e.identifier(i.imported.name))],e.stringLiteral(r[n][i.imported.name]?r[n][i.imported.name].replace(/\[path\]/,a):a));return t.add(o),o}))}}}}export default namedAssetImport;
