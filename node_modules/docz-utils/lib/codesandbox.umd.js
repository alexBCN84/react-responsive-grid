"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var path=require("path"),codesandboxerFs=require("codesandboxer-fs"),unescapeJS=_interopDefault(require("unescape-js")),prettier=require("prettier");require("signale");const formatter=e=>prettier.format(e,{parser:"babylon",semi:!1,singleQuote:!0,trailingComma:"all"}),classComponent=e=>{const n=e.match(/(class)(\s)(\w+)/m);return`\n    {() => {\n      ${e}\n      return <${n&&n[3]} />\n    }}\n  `},checkCodeToRender=e=>e.startsWith("()")?`{${e}}`:e.startsWith("class")?classComponent(e):`<React.Fragment>${e}</React.Fragment>`,wrapCode=e=>`import React from 'react';\n  import { jsx } from '@emotion/core'\n\n  const doczStyles = {\n    margin: '0 3px',\n    padding: '4px 6px',\n    fontFamily: '"Source Code Pro", monospace',\n    fontSize: 14,\n  };\n\n  const App = ({ children }) => (\n    <div style={doczStyles}>\n      {children && typeof children === 'function' ? children() : children}\n    </div>\n  )\n\n  export default () => (\n    <App>\n      ${checkCodeToRender(unescapeJS(e))}\n    </App>\n  )`;function getSandboxFiles(e,n,t){const o=[...n,formatter(wrapCode(e))].join("\n"),s=path.join(t,"codesandbox.example.csb.js");return codesandboxerFs.assembleFiles(s,{contents:o,extensions:[".js",".jsx",".ts",".tsx",".md",".html",".htm",".css",".css.less",".css.sass",".less",".sass",".scss",".svg",".png",".jpg",".jpeg"]})}const getSandboxImportInfo=async(e,n,t)=>{let o;try{const{parameters:s}=await getSandboxFiles(e,n,t);o=s}catch(e){console.error("Could not create Open in CodeSandbox",e)}return o};exports.getSandboxImportInfo=getSandboxImportInfo;
